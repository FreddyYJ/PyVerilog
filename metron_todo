fix fallthrough cases
fix #defines
support tock return types
assert that submodules are only bound once?
submod calls can only be at toplevel